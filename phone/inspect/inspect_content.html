<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../css/ui-box.css">
        <link rel="stylesheet" href="../css/ui-base.css">
        <link rel="stylesheet" href="../css/ui-color.css">
        <link rel="stylesheet" href="../css/appcan.icon.css">
        <link rel="stylesheet" href="../css/appcan.control.css">
        <link rel="stylesheet" href="css/yqq_cgrk.css">
        <link rel="stylesheet" href="css/wkf.css"/>
        <link rel="stylesheet" href="css/zk.css"/>
        <script src="../js/init.js"></script>
    </head>
    <body class="um-vp " ontouchstart>
        <div class="ub ub-ver">
            <!-- 工位开始 -->
          <div class="ub ub-f1 ub-ver yqq-xxk uc-a uinn umar-a ">  
              <div class="ub yqq-w10" >
                 <div  id="emptyInspectStation" class="ub w-click yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">送检工位</div>
                 <div  id="inspectStation" class="ub ub-f1 w-click umar-l yqq-bbd uinn ub-ac ub-pc wkf-hh wkf-font-w"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div id="emptyExamineStation" class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w w-click">检验工位</div>
                 <div  id="examineStation" class="ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc wkf-hh wkf-font-w w-click"></div>
              </div>
              <div  class="ub yqq-w10" >
                 <div id="emptyExamineProcess" class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w w-click">&diams;检验工序</div>
                 <div  id="examineProcess" class="ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc  wkf-hh wkf-font-w w-click"></div>
              </div>
          </div>
          <!-- 工位结束 -->
          <!--采购单号开始-->
          <div id="updataPart" class="ub ub-f1 ub-ver yqq-xxk uc-a uinn umar-a " style="margin-bottom: 1em">
              <div class="ub yqq-w10" >
                 <div id="emptyBarcode" class="ub w-click yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">条码</div>
                 <div id="barcode" class="w-click ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc wkf-hh wkf-font-z"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div id="emptyNum" class="w-click ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">&diams;品号</div>
                 <div id="articleNum" class="w-click ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc  wkf-hh wkf-font-z"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div  class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">品名</div>
                 <div id="articleName" class="ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc  wkf-hh wkf-font-z"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div  class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">规格</div>
                 <div id="standard" class="ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc  wkf-hh wkf-font-z"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div  class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">批次</div>
                 <div id="batch" class="ub ub-f1 umar-l yqq-bbd uinn ub-ac ub-pc  wkf-hh wkf-font-z"></div>
              </div>
              <div class="ub yqq-w10" >
                 <div  class="ub yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">数量<div id="unit" class="wkf-font-r"></div></div>
                 <div  class="ub ub-f1 umar-l yqq-bbd ub-ac ub-pc wkf-font-z">
                     <input type="number" readonly="readonly" min='0' id="amount" name=""  class="wkf-input-nob wkf-font-w" style="width:98%;text-align:center;border:none; height: 2.2em;" value="" placeholder=""/ >
                 </div>
              </div>
              <div class="ub yqq-w10" >
                 <div id="emptyInspectionType" class="ub w-click yqq-w3 yqq-bbd uinn ub-pc ub-ac wkf-font-w">检验类型</div>
                 <div id="tookInspectionType" class="select ub ub-f1 umar-l yqq-bbd ub-ac ub-pc wkf-font-w" style="border-top: 0px;border-left: 0px;border-right: 0px;">
                    <div class="text ub ub-ac ub-pc">请选择检验类型</div>
                    <div class="icon"></div>
                    <select  id="inspectionType">
                        <!-- <option value=0>选项一</option> -->
                    </select>
                 </div>
              </div>
              <div class="ub yqq-w10" >
                 <div id="emptyInspectionItem" class="ub yqq-w3 w-click yqq-bbd uinn ub-pc ub-ac wkf-font-w">检验项目</div>
                 <div id="tookInspectionItem" class="select ub ub-f1 umar-l yqq-bbd ub-ac ub-pc wkf-font-w" style="border-top: 0px;border-left: 0px;border-right: 0px;">
                    <div class="text ub ub-ac ub-pc">请选择检验项目</div>
                    <div class="icon"></div>
                    <select id="inspectionItem">
                        <!-- <option value=0>选项一</option> -->
                    </select>
                 </div>
              </div>
          </div>
          <!--采购单号结束-->
           <div id="down" class="ub ub-f1 ub-ver yqq-xxk uc-a uinn umar-a " style="margin-bottom: 2em;color:white;">
              <div id="" class="ub ub-f1">
                  <div class="ub wkf-font-w umar-l uinn">条码</div>
                  <div class="ub ub-f1 ub-pe">
                      <div class="ub uinn uc-a" id="deleteBarcoe" style="background-color: #2B6576">删除</div>
                  </div>
              </div>
              <div id="bar_append" class="wkf-hh1">
              </div>
              <!-- <label onclick="openNum('9900001173')"> 9900001173&nbsp;&nbsp;</label> -->
           </div>
        </div>
       
    <script src="../js/appcan.js"></script>
    <script src="../js/appcan.control.js"></script>
    <script src="../js/locStorageModify.js"></script>
    <script src="../js/jquery.min.js"></script>
    </body>
    <script>
        //全局变量 存数据
        //全部条码
        var stationObj1 = {};//工位的对象
        var stationObj2 = {};//工位的对象
        var processObj;
        var detailNeed = [];//总计需要字段
        var materialObj = {};
        var materialSObj = {};
        //取出工位
        var LOGIN = appcan.locStorage.getVal("LOGIN");
        LOGIN = JSON.parse( LOGIN );
        var select1 = 0;
        var select2 = 0;
        var barcodeBaseInfo = [];
        //当前组条码
        var barcodeArrNow = [];
        var clickIndex;//点击物料条码详情  数组下标
        var windowId//开窗的id
        //避免重复条码扫描
        var barcodeArr = []; 
        var LOGIN = appcan.locStorage.getVal("LOGIN");
        LOGIN = JSON.parse( LOGIN );
        appcan.ready(function() {
            $("#inspectStation").html(LOGIN.StationName);
            //获取检查类型
            insTypeFn();
            //获取检查项目
            insItemFn();
        });
        $('#inspectionType').change(function(){
            select1=$("#inspectionType").val();
            // appcan.alert(1,select1);
        }) 
        $('#inspectionItem').change(function(){
            select2=$("#inspectionItem").val();
            // appcan.alert(2,select2);
        }) 
        appcan.button(".w-click","ani-act",function(){
           windowId = this.id;
           switch( this.id ){
             case 'inspectStation': openWindow('istStation'); break;
             case 'examineStation': openWindow('istStation'); break;
             case 'examineProcess': if($('#examineStation').html() == ''){appcan.window.openToast('请先选择检验工位！',1000,5,0);return;}openWindow('istProcess'); break;
             case 'articleNum': if($('#barcode').html() == ''){appcan.window.openToast('请先扫描获取容器条码！',1000,5,0);return;}openWindow('istGoodsId'); break;
             // case 'emptyInspectStation': stationAjax1(9900001475); break;
             // case 'emptyExamineStation': stationAjax2(9900001480); break;
             // case 'emptyBarcode': barcodeAjax(9900001597); break;
             // case 'emptyExamineProcess': barcodeAjax(9900001598); break;
             case 'emptyInspectStation': $("#inspectStation").html(""); break;
             case 'emptyExamineStation': $("#examineStation").html(""); $("#examineProcess").html(""); break;
             case 'emptyBarcode': $("#barcode").html("");$("#articleNum").html("");$("#articleName").html("");$("#standard").html("");$("#batch").html(""); $("#amount").html(""); $("#unit").html(""); break;
             case 'emptyNum':  $("#articleNum").html(""); $("#articleName").html(""); $("#standard").html(""); $("#batch").html(""); $("#amount").html(""); $("#unit").html(""); break;
             case 'emptyInspectionType':  $(".text:first").html("请选择检验类型"); select1= 0; $("#inspectionType").val(select1);break;
             case 'emptyInspectionItem':  $(".text:last").html("请选择检验项目"); select2= 0; $("#inspectionItem").val(select2);break;
           }
        })
        //开窗
        function openWindow( name ){
            localOption.localSave( name );
            appcan.window.open({
                name:name,
                data:name+'.html',
            })
        }
        //接受扫描数据
        function getData( Data )
        {
            // alert( Data );
            if($("#inspectStation").html() == null || $("#inspectStation").html() == ""){
                 stationAjax1( Data );
            }else if($("#examineStation").html() == null || $("#examineStation").html() == ""){
                 stationAjax2( Data );
            }else if($("#examineProcess").html() == null || $("#examineProcess").html() == ""){
                appcan.window.openToast('请先选择工序！',1000,5,0);
            }else if($("#barcode").html() == null|| $("#barcode").html() == ""){
                barcodeAjax( Data );
            }else if($("#articleNum").html() == null|| $("#articleNum").html() == ""){
                appcan.window.openToast('请先选择品号！',1000,5,0);
            }else if($('#amount').val() == ''){
                appcan.window.openToast('请先输入数量！',1000,5,0);
            }else if(select1 == 0 || select1 == "0"){
                 appcan.window.openToast('请选择检验类型！',1000,5,0);
            }else if(select2 == 0 || select2 == "0"){
                 appcan.window.openToast('请选择检验项目！',1000,5,0);
            } else {
                 appcan.window.openToast('请核查后保存数据！',1000,5,0);
            }
        }       
        //satation-->ajax   送检
        function stationAjax1( Data ){
            appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                    input:{
                        LogicType:"扫码",
                        ScanType:"工位精确查询",
                        StationInput:{
                                "StationBarCode":Data,//"9900001471"
                        }
                   }
                },
                dataType:"json",
                success : function( info ) {
                    // appcan.window.alert(JSON.stringify(info));
                    if(!info.bSuccess){
                        appcan.window.openToast(info.Error,3000,5,0);
                        return;
                    }
                    if( info.StationOutput.IsSuccess ){
                        stationObj1 = info.StationOutput.StationInfo;
                        $("#inspectStation").html(info.StationOutput.StationInfo.StationName);
                        $('html,body').animate({scrollTop:$('#inspectStation').offset().top-80},1000);
                    }
                },
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            })
        }      
        //satation-->ajax   检验
        function stationAjax2( Data ){
            appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                    input:{
                        "OpType":"扫码",
                        "WorkLocationBarcode":Data,
                        "LogicType":"工位管理"
                    }
                },
                dataType:"json",
                success : function( info ) {
                        // appcan.alert( 1,JSON.stringify(info) );
                        if(!info.bSuccess){
                            appcan.window.openToast(info.Error,3000,5,0);
                            return;
                        }
                        if( info.ifStationBarcode && info.ifStationBarcodeOnStick ){
                            $("#examineProcess").html('');
                            $("#examineStation").html(info.WorkLocationInfo.StationName);
                            stationObj2 = info.WorkLocationInfo;
                             if(info.WorkLocationProcessList.length == 1){
                                 processObj = info.WorkLocationProcessList[0];
                                 $("#examineProcess").html(info.WorkLocationProcessList[0].ProcessName);
                             }
                             appcan.locStorage.setVal( "ISTPROCESS" , info.WorkLocationProcessList );
                            $('html,body').animate({scrollTop:$('#examineStation').offset().top-80},1000);
                        }else {
                            appcan.window.openToast(info.Error,3000,5,0);
                        }
                        if(!info.bSuccess){
                            appcan.window.openTost(info.Error,3000,5,0);
                        }
                },  
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            })
        }
        //barcode -->ajax
        function barcodeAjax( Data ){
            if( barcodeArr.indexOf(Data) !== -1){
                appcan.window.openToast('条码重复!',1000,5,0);
                return;
            }
            appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                    input:{
                        LogicType:"扫码",
                        scanType:"通用扫码",
                        barcode:Data
                    }
                },
                dataType:"json",
                success : function( info ) {
                    // appcan.alert( 1 , JSON.stringify( info ) );
                    if(!info.bSuccess){
                        appcan.window.openToast(info.Error,3000,5,0);
                        return;
                    }
                    if( info.BarcodeType=="1" ){         //容器码 类型判断
                        if( info.isBarcodeBeUsed  ){        //容器码是否实例化
                            if(info.BarcodeInfo.materialbarcodeList == null || info.BarcodeInfo.materialbarcodeList.length == 0){
                                appcan.window.openToast("容器码为空！",1000,5,0);
                                return;
                            }
                            $("#barcode").html( Data );
                            materialObj = info.BarcodeInfo.materialbarcode;
                            if(info.BarcodeInfo.materialbarcodeList.length == 1){
                                materialSObj = info.BarcodeInfo.materialbarcodeList[0];
                                $("#articleName").html(info.BarcodeInfo.materialbarcodeList[0].MatName);
                                $("#articleNum").html(info.BarcodeInfo.materialbarcodeList[0].MaterialID);
                                $("#standard").html(info.BarcodeInfo.materialbarcodeList[0].Specifications);
                                $("#batch").html(info.BarcodeInfo.materialbarcodeList[0].BusinessBatch);
                                $("#unit").html(info.BarcodeInfo.materialbarcodeList[0].Company);
                                $('#amount').html(info.BarcodeInfo.materialbarcodeList[0].Amount);
                             }
                             appcan.locStorage.setVal( "INSPECTPRODUCT" , info.BarcodeInfo );
                             $('html,body').animate({scrollTop:$('#barcode').offset().top-80},1000);
                        }else {
                            appcan.window.openToast("条码无实例！",1000,5,0);
                        }
                    }else if(info.BarcodeType=="9"){
                        materialSObj = info.BarcodeInfo.materialbarcode;
                        $("#articleName").html(materialSObj.MatName);
                        $("#articleNum").html(materialSObj.MaterialID);
                        $("#standard").html(materialSObj.Specifications);
                        $("#batch").html(materialSObj.BusinessBatch);
                        $("#unit").html(materialSObj.Company);
                        $('#amount').html(materialSObj.Amount);
                    } else {
                        appcan.window.openToast("条码类型错误！",1000,5,0);
                    }
                },
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            })
        }
        //检查类型的获取
        var insTypeFn = function(){
            $('#inspectionType').html('');
            appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                   input:{
                       LogicType:"通用",
                       CommonType:"检验类型"
                   }
                },
                dataType:"json",
                success : function( info ) {
                    // appcan.alert(JSON.stringify(info));
                    if( info.bSuccess  ){//------------------------等待后台
                    // appcan.alert(1,JSON.stringify(info));
                        var arr = info.CheckTypeLis,
                        length = arr.length;
                        for(var i=0;i<length;i++){
                            var str = '<option value='+arr[i].Value+'>'+arr[i].Value+'</option>';
                            $('#inspectionType').append(str);
                        }
                       appcan.select("#tookInspectionType",function(ele,value){
                          $('html,body').animate({scrollTop:$('#inspectionType').offset().top-80},1000);
                       });    
                    }else{
                        appcan.window.openTost(info.Error,3000,5,0);
                    }
                    
                },
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            });
        }
        //检查项目的获取
        var insItemFn = function(){
            $('#inspectionItem').html('');
            appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                   input:{
                       LogicType:"扫码",
                       ScanType:"检验项目查询",
                       InspectionInput:{
                       }
                   }
                },
                dataType:"json",
                success : function( info ) {
                    // appcan.alert("提示",JSON.stringify(info));                  
                    if( info.bSuccess  ){//------------------------等待后台
                    // appcan.alert(1,JSON.stringify(info));
                        var arr = info.InspectionOutput.List,
                        length = arr.length;
                        for(var i=0;i<length;i++){
                            var str = '<option value='+arr[i].InspectionName+'>'+arr[i].InspectionName+'</option>';
                            $('#inspectionItem').append(str);
                        }
                       appcan.select("#tookInspectionItem",function(ele,value){
                          $('html,body').animate({scrollTop:$('#inspectionItem').offset().top-80},1000);
                       });    
                    }else{
                        appcan.window.openTost(info.Error,3000,5,0);
                    }
                    
                },
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            });
        }
        //删除当前条码
        appcan.button('#deleteBarcoe','ani-act',function(){
            $('#bar_append>:first').remove();
            if($("#barcode").html() == null || $("#barcode").html() == ""){
                    barcodeArrNow.pop();
                    barcodeArr.pop();
                    detailNeed.pop();
                    barcodeBaseInfo.pop();
            } else {
                   select1= 0;
                   select2= 0; 
                   $("#barcode").html("");
                   $("#articleName").html("");
                   $("#articleNum").html("");
                   $("#standard").html("");
                   $("#batch").html("");
                   $("#amount").val("");
                   $("#unit").html("");
                   $(".text:first").html("请选择检验类型");
                   $(".text:last").html("请选择检验项目");
                   $("#inspectionType").val(select1);
                   $("#inspectionItem").val(select2);
            }
            appcan.window.evaluateScript({
                name:"inspect",
                scriptContent:"modifyCount("+detailNeed.length+")"
            });
        });
        
        
       //保存数据
       function returnsInwardsSave(){
           //先判断是否都有值
           if($("#barcode").html() == "" || $("#barcode").html() == null){
               appcan.window.openToast("请先扫描容器码！",1000,5,0);
               return ;
           };
           if($("#amount").val() == "" || $("#amount").val() == null){
               appcan.window.openToast("请先填写数量！",1000,5,0);
               return ;
           }
            if(select1 == 0 || select1 == "0"){
               appcan.window.openToast("请先选择检验类型！",1000,5,0);
               return ;
           }
            if(select2 == 0 || select2 == "0"){
               appcan.window.openToast("请先选择检验项目！",1000,5,0);
               return ;
           }
            //显示
          appcan.window.alert({
            title:'提示',
            content:'是否保存',
            buttons:['是','否'],
            callback:function(err,data,dataType,optId){
               if( data == 0 ){
                var str = '<label>'+$("#barcode").html()+'&nbsp;&nbsp;</label>'
                $('#bar_append').prepend(str);
               //完整数据存入对象
               var updataPartJson = {
                      "ContainerBarcode":materialSObj.Barcode,//物料条码
                      "MaterialGUID":materialSObj.GUID,//物料实例GUID
                      "ProductNo":materialSObj.MaterialID,//品号
                      "Specifications":materialSObj.Specifications,//规格
                      "Batch":materialSObj.BusinessBatch, //批次
                      "Account":$("#amount").val(),//数量
                      "InspectionType":select1,//检验类型
                      "InspectionItems":select2//检验项目
                };
               Djson = {
                     BarCode :$("#barcode").html(),
                     PRONAME:$("#articleName").html(), 
                     ProductNo :$("#articleNum").html(),
                     Specifications:$("#standard").html(),
                     BusinessBatch:$("#batch").html(),
                     Num:$("#amount").val(),
                     Unit:$("#unit").html(),
                     Type:$(".text:first").html(),
                     Item:$(".text:last").html()
               };
                   barcodeArr.push($("#barcode").html()) ;
                   detailNeed.push(Djson) ;
                   barcodeBaseInfo.push(updataPartJson);
                   appcan.window.openToast("保存成功！",1000,5,0);
                   //清空updatapart
                   //appcan.window.alert(JSON.stringify(updataPartJson));
                   select1= 0;
                   select2= 0; 
                   $("#barcode").html("");
                   $("#articleName").html("");
                   $("#articleNum").html("");
                   $("#standard").html("");
                   $("#batch").html("");
                   $("#amount").val("");
                   $("#unit").html("");
                   $(".text:first").html("请选择检验类型");
                   $(".text:last").html("请选择检验项目");
                   $("#inspectionType").val(select1);
                   $("#inspectionItem").val(select2);
                   // barcodeArrNow = [];
                    appcan.window.evaluateScript({
                        name:"inspect",
                        scriptContent:"modifyCount("+detailNeed.length+")"
                    });
                   $('html,body').animate({scrollTop:$('#barcode').offset().top-80},1000);
               }
            }
          })
       }
       function returnsInwardsSubmit(){
           if(!confirm("确定提交？")){
               return;
           }

           if( barcodeBaseInfo.length === 0){
               appcan.window.openToast('当前没有可提交数据！',1000,5,0);
               return;
           } else {
               appcan.window.openToast('提交中...',10000,5,1);
           }
           // var submitInfo = {
            // // "StationBarcode": stationObj.StationBarcode,
            // // "SingleType": categoryObj.Name,
            // // "SuppierID":supplierObj.Id,
            // // "SuppierName": supplierObj.SupplierName,
            // // "PurchaseNo": purchaseNumObj.ProductNo,
            // // "OperaterId": LOGIN.UserID,
            // // "Operater": LOGIN.U_LoginName,
              // // lstPurchaseRetun:barcodeBaseInfo
           // }
           // appcan.window.alert( "提示" , JSON.stringify(submitInfo) );         
           var  input={
              "LogicType": "检验",
              "OpType": "送检",
              "InspectionStation":stationObj1.StationName,//送检工位
              "InspectionProcedure":processObj.ProcessName,//检验工序
              "TestStation":stationObj2.StationName,//检验工位
              "CreatePerson":LOGIN.U_LoginName,//操作人
              "CreatePersonID":String(LOGIN.UserID),//操作人ID
              "InspectionList": barcodeBaseInfo
            }
           // appcan.window.alert( "提示", JSON.stringify(input) );                                                                 
           appcan.request.ajax({
                url:"http://10.101.55.73/fzzy/SPEngine/Barcode",
                type:"POST",
                data:{
                    input:input
                },
                dataType:"json",
                success : function( info ) {
                    // appcan.window.alert(JSON.stringify(info));
                    appcan.window.closeToast();
                    if( info.bSuccess ){
                        appcan.window.openToast("提交成功",1000,5,0);
                        // uexWindow.reload();
                        appcan.window.evaluateScript({
                            name : 'inspect',
                            scriptContent : 'subReview()',
                        })
                    }else{
                        appcan.window.openToast(info.Error,1000,5,0);
                    }
                },
                error: function(){
                    appcan.window.openToast("网络请求错误！",1000,5,0);
                }
            })       
       }
       //删除条码记录
       function deleteNum(deleteNum){
           barcodeBaseInfo.splice(clickIndex,1);
           $('#'+deleteNum).remove();
       }
       //开窗带回函数
       function openWindowBack (Obj){
            var Obj = JSON.parse( Obj );
            // appcan.window.alert( windowId ,JSON.stringify(Obj));
            switch( windowId )
            {
                case 'inspectStation': {
                     $("#inspectStation").html(Obj.StationName);
                     stationObj1 = Obj;
                     break;
                }
                case 'examineStation':{
                    $("#examineProcess").html('');
                    $("#examineStation").html(Obj.StationName);
                    stationAjax2( Obj.StationBarcode );
                    // stationObj2 = Obj;
                    break;
                }
                case 'examineProcess':{
                    $("#examineProcess").html(Obj.ProcessName);
                    processObj = Obj;
                    break;
                }
                case 'articleNum':{
                    $("#articleNum").html(Obj.MaterialID);
                    $("#articleName").html(Obj.MatName);
                    $("#standard").html(Obj.Specifications);
                    $("#batch").html(Obj.BusinessBatch);
                    $("#unit").html('('+Obj.Company+')');
                    $('#amount').html(Obj.Amount);
                    materialSObj = Obj;
                    break;
                }
            }
       }
       
       //开启总计页面
       function openTotal(){
           localOption.localSave('istAmountDetail');
           appcan.locStorage.val('INSPECTAMOUNTDETAILINFO',detailNeed);
           appcan.window.open({
               name:"istAmountDetail",
               data:"istAmountDetail.html"
           });
       }
        
 </script>
</html>
